.. title:: Точка входу "Нотаріус" для API проекту "Суд на долоні"

.. meta::
    :desctription: Точка входу "Нотаріус" для API проекту "Суд на долоні"
    :robots: index, follow
    :viewport: width=device-width, initial-scale=1
    :language: uk
    :keywords: Суд на долоні, API, нотаріус
    :author: Кирило Захаров
    :copyright: Суд на долоні

Нотаріус
========

Точка входу "Нотаріус" повертає інформацію стосовно нотаріусів України.

Загальна інформація
-------------------

Інформація про нотаріусів з даних Єдиного реєстру нотаріусів Міністерства юстиції України, опублікованого на `Національному порталі відкритих даних <https://data.gov.ua/dataset/1603f092-68b3-4c25-afef-8632aed79daf>`_.

Уся інформація щодо юридичних осіб оновлюється один раз на 1-2 тижні.


Кількість нотаріусів
--------------------

GET-запит за адресою ``https://api.conp.com.ua/api/v1.0/notary`` повертає загальну кількість нотаріусів в системі

.. sourcecode:: http

  GET /notary HTTP/1.0
  Host: https://api.conp.com.ua/api/v1.0

  { "message": 6387 }

-----

Отримання інформації про нотаріуса
----------------------------------

GET-запит за адресою ``https://api.conp.com.ua/api/v1.0/notary/:id`` повертає інормацію про нотаріуса за `відповідною схемою даних <notary.html>`_ `. Де id - номер свідоцтва нотаріуса.

.. sourcecode:: http

  GET /notary/743 HTTP/1.0
  Host: https://api.conp.com.ua/api/v1.0

  {
    "person": {
      "source": "Полковнікова Тетяна Антонівна",
      "idName": "Полковнікова Т. А.",
      "fullName": "Полковнікова Тетяна Антонівна",
      "familyName": "Полковнікова",
      "givenName": "Тетяна",
      "additionalName": "Антонівна",
      "sex": "жінка",
      "jobTitle": "Нотаріус",
      "worksFor": {
        "legalName": "БОГУСЛАВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА",
        "name": "БОГУСЛАВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА",
        "identifier": {
          "scheme": "UA-EDR",
          "id": "02884316",
          "valid": true
        },
        "currentStatus": "зареєстровано",
        "kved": {
          "part": "69",
          "group": "10"
        },
        "full_kved": "69.10 Діяльність у сфері права",
        "address": {
          "source": "09700, Київська обл., Богуславський район, місто Богуслав, ВУЛИЦЯ МИКОЛАЇВСЬКА, будинок 28",
          "countryName": "Україна",
          "postalCode": "09701",
          "region": "Київська область",
          "district": "Богуславський район",
          "locality": "місто Богуслав",
          "streetNumber": "28",
          "streetAddress": "вулиця Миколаївська, 28",
          "fullAddress": "09701, Київська область, Богуславський район, місто Богуслав, вулиця Миколаївська, 28"
        },
        "head": {
          "source": "ПОЛКОВНІКОВА ТЕТЯНА АНТОНІВНА",
          "idName": "Полковнікова Т. А.",
          "fullName": "Полковнікова Тетяна Антонівна",
          "familyName": "Полковнікова",
          "givenName": "Тетяна",
          "additionalName": "Антонівна",
          "sex": "жінка",
          "jobTitle": "Директор"
        },
        "updatedAt": "2018-08-06T20:54:27.833Z"
      }
    },
    "certificateNumber": "743",
    "phones": [
      "+38 (045) 615 11 95"
    ],
    "address": {
      "source": "Київська обл., Богуславський р., м. Богуслав, 09700, вул. Миколаївська, 28, (04561) 5-11-95",
      "countryName": "Україна",
      "postalCode": "09701",
      "region": "Київська область",
      "district": "Богуславський район",
      "locality": "місто Богуслав",
      "streetNumber": "28",
      "streetAddress": "вулиця Миколаївська, 28",
      "fullAddress": "09701, Київська область, Богуславський район, місто Богуслав, вулиця Миколаївська, 28"
    },
    "updatedAt": "2018-02-22T00:00:00.000Z"
  }

-----

Пошук нотаріусів
----------------

POST-запит за адресою ``https://api.conp.com.ua/api/v1.0/notary/search`` дозволяє шукати нотаріусів.

POST-запит має містити JSON з наступними змінними

:query:
    рядок
    
    Перелік термінів для повнотекстового пошуку.

:defaultOperator:
    рядок
    
    Приймає значення ``or`` або ``and``, щоб шукати будь-який з термінів для повнотекстового пошуку або усі терміни.

:filter:
    об'єкт
    
    Об'єкт, який містить перелік усіх пошукових фільтрів, встановлених користувачем.

:sort:
    об'єкт
    
    Об'єкт, який визначає порядок сортування результатів.

:from:
    ціле число (integer)
    
    Кількість об'єктів, яку необхідно пропустити (використовується для пагінації).

:aggregation:
    булеве значення
    
    Якщо встановлено значення ``false``, то в результаті буде отримано перелік нотаріусів, які відповідають повнотекстовому запиту та фільтрам. Якщо встановлено значення ``true``, то повертає перелік агрегацій для фасетного пошуку.

Фільтри
~~~~~~~

Кожен з фільтрів має бути об'єктом з певною назвою (поле, за яким відбувається фільтрація) та будуватися за схемою:

:list:
    масив рядків
    
    Перелік точних значень термінів для фільтрації результату.

:operator:
    рядок
    
    Приймає значення ``or`` або ``and``, щоб у результат попадали сутності з будь-яким зі значень фільтру або усі значення фільтру.

Нотаріусів можна фільтрувати за точними значеннями таких змінних:

* **certificateNumber** - Номер свідоцтва нотаріуса
* **sex** - Стать нотаріуса
* **address.region** - Область, в якій працює нотаріус
* **address.district** - Район або район у місті, в якому працює нотаріус
* **address.locality** - Населений пункт, в якому працює нотаріус
* **address.fullAddress** - Повна адреса, за якою працює нотаріус
* **worksFor** - Повна назва організації, в якій працює нотаріус

Приклад використання фільтру - "(1) Нотаріуси-жінки, (2) які працюють у Києво-Святошинському районі":

.. sourcecode:: http

  ...
  {"filter": {
    "sex": {
      "list": [
        "жінка"
      ],
      "operator": "or"
    },
    "address.district": {
      "list": [
        "Києво-Святошинський район"
      ],
      "operator": "or"
    }
  }
  ...

Сортування
~~~~~~~~~~

Для нотаріусів дозволено сортування за повним іменем. Якщо змінна ``sort`` у запиті має значення ``{}``, то сортування відбуватиметься за релевантністю.

Приклад сортування за повним іменем:

.. sourcecode:: http
  
  ...
  "sort": {
    "person.fullName.sort": { "order": "desc" }
  }
  ...

Агрегація
~~~~~~~~~

Для нотаріусів передбачено агрегацію за такими змінними:

* Організація, в якій працює нотаріус
* Область, де працює нотаріус
* Населений, де працює нотаріус
* Район або район у місті, де працює нотаріус
* Стать нотаріуса

Агрегації розраховуються автоматично для усіх змінних, для яких встановлено фільтр. Якщо необхідно отримати агрегацію без фільтрації, то необхідно задати "пустий" фільтр таким чином:

.. sourcecode:: http

  ...
  "filter": {
    "worksFor": {
      "list": [],
      "operator": "or"
    }
  }
  ...


Приклад повного запиту та відповіді
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. sourcecode:: http

  POST /notary/search HTTP/1.0
  Host: https://api.conp.com.ua/api/v1.0

  {
    "query": "",
    "defaultOperator": "or",
    "filter": {
      "fullName": {
        "list": [],
        "operator": "or"
      },
      "sex": {
        "list": [
          "жінка"
        ],
        "operator": "or"
      },
      "address.region": {
        "list": [],
        "operator": "or"
      },
      "address.district": {
        "list": [],
        "operator": "or"
      },
      "address.locality": {
        "list": [],
        "operator": "or"
      },
      "address.fullAddress": {
        "list": [],
        "operator": "or"
      },
      "certificateNumber": {
        "list": [],
        "operator": "or"
      },
      "worksFor": {
        "list": [
          "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
        ],
        "operator": "or"
      }
    },
    "sort": {
      "person.fullName.sort": {
        "order": "asc"
      }
    },
    "searchIndex": "notary",
    "from": 0,
    "aggregation": false
  }

  {
    "total": 39,
    "items": [
      {
        "address": {
          "streetAddress": "вулиця Галицька, 40",
          "district": "Рогатинський район",
          "locality": "місто Рогатин",
          "region": "Івано-Франківська область"
        },
        "certificateNumber": "3423",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Андрейків Тетяна Володимирівна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Шевченка, 70",
          "district": "Снятинський район",
          "locality": "місто Снятин",
          "region": "Івано-Франківська область"
        },
        "certificateNumber": "2705",
        "person": {
          "worksFor": {
            "legalName": "ПЕРША МАКІЇВСЬКА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Білоконь Катерина Семенівна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця 28 Червня, 125",
          "district": "Ренійський район",
          "locality": "місто Рені",
          "region": "Одеська область"
        },
        "certificateNumber": "4670",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Букатич Евеліна Валеріївна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Миру, 32",
          "district": "Сновський район",
          "locality": "місто Сновськ",
          "region": "Чернігівська область"
        },
        "certificateNumber": "818",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Васильченко Тетяна Петрівна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Молодих Патріотів, 10 а",
          "district": "Якимівський район",
          "locality": "селище міського типу Якимівка",
          "region": "Запорізька область"
        },
        "certificateNumber": "1608",
        "person": {
          "worksFor": {
            "legalName": "ЯКИМІВСЬКА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Володіна Оксана Станіславівна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Костіна, 19",
          "district": "Біляївський район",
          "locality": "місто Біляївка",
          "region": "Одеська область"
        },
        "certificateNumber": "7530",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Грабовенко-Ворсуляк Діана Миколаївна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Красна, 223а",
          "district": "Тарутинський район",
          "locality": "селище міського типу Тарутине",
          "region": "Одеська область"
        },
        "certificateNumber": "3611",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Давидова Наталя Георгіївна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Червона Площа",
          "district": "Семенівський район",
          "locality": "місто Семенівка",
          "region": "Чернігівська область"
        },
        "certificateNumber": "6109",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Доля Наталія Миколаївна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Леніна, 50",
          "district": "Срібнянський район",
          "locality": "селище міського типу Срібне",
          "region": "Чернігівська область"
        },
        "certificateNumber": "806",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Домашенко Людмила Анатоліївна"
        }
      },
      {
        "address": {
          "streetAddress": "вулиця Осмомисла Я.",
          "district": "Галицький район",
          "locality": "місто Галич",
          "region": "Івано-Франківська область"
        },
        "certificateNumber": "5541",
        "person": {
          "worksFor": {
            "legalName": "ОБУХІВСЬКА РАЙОННА ДЕРЖАВНА НОТАРІАЛЬНА КОНТОРА"
          },
          "jobTitle": "Нотаріус",
          "fullName": "Кіщук Людмила Іванівна"
        }
      }
    ]
  }
